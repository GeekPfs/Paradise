<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="links/reset.css"/>
    <link rel="stylesheet" type="text/css" href="links/fonts.css"/>
    <link rel="stylesheet" type="text/css" href="links/main.css"/>
    <link rel="stylesheet" type="text/css" href="links/theme.css"/>
    <script src="scripts/lib/controller.js"></script>
    <script src="scripts/lib/theme.js"></script>
    <script src="scripts/lib/logo.js"></script>
    <script src="scripts/client.js"></script>
    <script src="scripts/commander.js"></script>
    <script src="scripts/walkthrough.js"></script>
    <script src="scripts/speaker.js"></script>
    <title>Paradise</title>
  </head>
  <body>
    <wr>
      <page>
        <h1 id='h1'></h1>
        <h2 id='page'></h2>
        <div id='reaction'></div>
        <p id='note'></p>
        <p id='action'></p>
        <p id='view'></p>
        <list id='tips'></list>
      </page>
      <div id='inventory' class='hidden'></div>
      <hint id='hint'></hint>
      <input id='input' placeholder="What would you like to do?"/>
      <a id='inventory_toggle' onclick="client.toggle_inventory()"></a>
    </wr>
    <script>
      const {dialog,app} = require('electron').remote;
      const fs = require('fs');
      const app_path = app.getAppPath();
      const Paradise = require('../server/paradise')
      const parade = new Paradise()
      const client = new Client();

      client.controller.add("default","*","About",() => { require('electron').shell.openExternal('https://github.com/hundredrabbits/Left'); },"CmdOrCtrl+,");
      client.controller.add("default","*","Fullscreen",() => { app.toggle_fullscreen(); },"CmdOrCtrl+Enter");
      client.controller.add("default","*","Hide",() => { app.toggle_visible(); },"CmdOrCtrl+H");
      client.controller.add("default","*","Inspect",() => { app.inspect(); },"CmdOrCtrl+.");
      client.controller.add("default","*","Documentation",() => { client.controller.docs(); },"CmdOrCtrl+Esc");
      client.controller.add("default","*","Reset",() => { client.reset(); },"CmdOrCtrl+Backspace");
      client.controller.add("default","*","Quit",() => { app.exit(); },"CmdOrCtrl+Q");

      client.controller.add("default","File","New World",() => { client.reset(); },"CmdOrCtrl+Shift+N");
      client.controller.add("default","File","Import World",() => { client.import(); },"CmdOrCtrl+Shift+O");
      client.controller.add("default","File","Export World",() => { client.export(); },"CmdOrCtrl+Shift+S");
      
      client.controller.add_role("default","Edit","undo");
      client.controller.add_role("default","Edit","redo");
      client.controller.add_role("default","Edit","cut");
      client.controller.add_role("default","Edit","copy");
      client.controller.add_role("default","Edit","paste");
      client.controller.add_role("default","Edit","delete");
      client.controller.add_role("default","Edit","selectall");
      client.controller.add("default","Edit","Autocomplete",() => { this.input.complete(); },"Tab");

      client.controller.commit();
      
      client.install(document.body);
      client.start();
      // client.walkthrough.start(1000);

      // let logo = new Logo();
      // logo.install(120);
      // setTimeout(function(){ logo.remove(); }, 5500);
    </script>
  </body>
</html>
